<!doctype html>
<html lang="en">

<head>
	<title>Notifications | Klorofil - Free Bootstrap Dashboard Template</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<!-- VENDOR CSS -->
	<link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/vendor/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="assets/vendor/linearicons/style.css">
	<link rel="stylesheet" href="assets/vendor/toastr/toastr.min.css">
	<!-- MAIN CSS -->
	<link rel="stylesheet" href="assets/css/main.css">
	<!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
	<link rel="stylesheet" href="assets/css/demo.css">
	<!-- GOOGLE FONTS -->
	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
	<!-- ICONS -->
	<link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
	<link rel="icon" type="image/png" sizes="96x96" href="assets/img/favicon.png">
</head>

<body>
	<!-- WRAPPER -->
	<div id="wrapper">
		<!-- NAVBAR -->
		<nav class="navbar navbar-default navbar-fixed-top">
			<div class="brand">
				<a href="index.html"><img src="assets/img/logo-dark.png" alt="Klorofil Logo" class="img-responsive logo"></a>
			</div>
			<div class="container-fluid">
				<div class="navbar-btn">
					<button type="button" class="btn-toggle-fullwidth"><i class="lnr lnr-arrow-left-circle"></i></button>
				</div>
				<form class="navbar-form navbar-left">
					<div class="input-group">
						<input type="text" value="" class="form-control" placeholder="Search dashboard...">
						<span class="input-group-btn"><button type="button" class="btn btn-primary">Go</button></span>
					</div>
				</form>
				<div class="navbar-btn navbar-btn-right">
					<a class="btn btn-success update-pro" href="https://www.themeineed.com/downloads/klorofil-pro-bootstrap-admin-dashboard-template/?utm_source=klorofil&utm_medium=template&utm_campaign=KlorofilPro" title="Upgrade to Pro" target="_blank"><i class="fa fa-rocket"></i> <span>UPGRADE TO PRO</span></a>
				</div>
				<div id="navbar-menu">
					<ul class="nav navbar-nav navbar-right">
						<li class="dropdown">
							<a href="#" class="dropdown-toggle icon-menu" data-toggle="dropdown">
								<i class="lnr lnr-alarm"></i>
								<span class="badge bg-danger">5</span>
							</a>
							<ul class="dropdown-menu notifications">
								<li><a href="#" class="notification-item"><span class="dot bg-warning"></span>System space is almost full</a></li>
								<li><a href="#" class="notification-item"><span class="dot bg-danger"></span>You have 9 unfinished tasks</a></li>
								<li><a href="#" class="notification-item"><span class="dot bg-success"></span>Monthly report is available</a></li>
								<li><a href="#" class="notification-item"><span class="dot bg-warning"></span>Weekly meeting in 1 hour</a></li>
								<li><a href="#" class="notification-item"><span class="dot bg-success"></span>Your request has been approved</a></li>
								<li><a href="#" class="more">See all notifications</a></li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="lnr lnr-question-circle"></i> <span>Help</span> <i class="icon-submenu lnr lnr-chevron-down"></i></a>
							<ul class="dropdown-menu">
								<li><a href="#">Basic Use</a></li>
								<li><a href="#">Working With Data</a></li>
								<li><a href="#">Security</a></li>
								<li><a href="#">Troubleshooting</a></li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown"><img src="assets/img/user.png" class="img-circle" alt="Avatar"> <span>Samuel</span> <i class="icon-submenu lnr lnr-chevron-down"></i></a>
							<ul class="dropdown-menu">
								<li><a href="#"><i class="lnr lnr-user"></i> <span>My Profile</span></a></li>
								<li><a href="#"><i class="lnr lnr-envelope"></i> <span>Message</span></a></li>
								<li><a href="#"><i class="lnr lnr-cog"></i> <span>Settings</span></a></li>
								<li><a href="#"><i class="lnr lnr-exit"></i> <span>Logout</span></a></li>
							</ul>
						</li>
						<!-- <li>
							<a class="update-pro" href="https://www.themeineed.com/downloads/klorofil-pro-bootstrap-admin-dashboard-template/?utm_source=klorofil&utm_medium=template&utm_campaign=KlorofilPro" title="Upgrade to Pro" target="_blank"><i class="fa fa-rocket"></i> <span>UPGRADE TO PRO</span></a>
						</li> -->
					</ul>
				</div>
			</div>
		</nav>
		<!-- END NAVBAR -->
		<!-- LEFT SIDEBAR -->
		<div id="sidebar-nav" class="sidebar">
			<div class="sidebar-scroll">
				<nav>
					<ul class="nav">
						<li><a href="index.html" class=""><i class="lnr lnr-home"></i> <span>Dashboard</span></a></li>
						<li>
							<a href="#subPages" data-toggle="collapse" class="collapsed"><i class="lnr lnr-chart-bars"></i> <span>Map Analysis</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
							<div id="subPages" class="collapse ">
								<ul class="nav">
									<li><a href="map_2016.html" class="">2016</a></li>
									<li><a href="map_2017.html" class="">2017</a></li>
								</ul>
							</div>
						</li>
						<!-- <li><a href="map.html" class=""><i class="lnr lnr-map-marker"></i> <span>Map Analysis</span></a></li> -->
						<!-- <li><a href="elements.html" class=""><i class="lnr lnr-code"></i> <span>Elements</span></a></li>
						<li><a href="charts.html" class=""><i class="lnr lnr-chart-bars"></i> <span>Charts</span></a></li>
						<li><a href="panels.html" class=""><i class="lnr lnr-cog"></i> <span>Panels</span></a></li>
						<li><a href="notifications.html" class="active"><i class="lnr lnr-alarm"></i> <span>Notifications</span></a></li>
						<li>
							<a href="#subPages" data-toggle="collapse" class="collapsed"><i class="lnr lnr-file-empty"></i> <span>Pages</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
							<div id="subPages" class="collapse ">
								<ul class="nav">
									<li><a href="page-profile.html" class="">Profile</a></li>
									<li><a href="page-login.html" class="">Login</a></li>
									<li><a href="page-lockscreen.html" class="">Lockscreen</a></li>
								</ul>
							</div>
						</li>
						<li><a href="tables.html" class=""><i class="lnr lnr-dice"></i> <span>Tables</span></a></li>
						<li><a href="typography.html" class=""><i class="lnr lnr-text-format"></i> <span>Typography</span></a></li>
						<li><a href="icons.html" class=""><i class="lnr lnr-linearicons"></i> <span>Icons</span></a></li> -->
					</ul>
				</nav>
			</div>
		</div>
		<!-- END LEFT SIDEBAR -->
		<!-- MAIN -->
		<div class="main">
			<!-- MAIN CONTENT -->
			<div class="main-content">
				<div class="container-fluid">
					<h3 class="page-title">Analysis</h3>
					<div id="container_gender_2017" class='container'></div>
					<div id="container_brand_2017" class='container'></div>
					<div id="container_age_2017" class='container'></div>
				</div>
			</div>
			<!-- END MAIN CONTENT -->
		</div>
		<!-- END MAIN -->
		<div class="clearfix"></div>
		<footer>
			<div class="container-fluid">
				<p class="copyright">&copy; 2017 <a href="https://www.themeineed.com" target="_blank">Theme I Need</a>. All Rights Reserved.</p>
			</div>
		</footer>
	</div>
	<!-- END WRAPPER -->
	<!-- Javascript -->
	<script src="assets/vendor/jquery/jquery.min.js"></script>
	<script src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
	<script src="assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
	<script src="assets/vendor/toastr/toastr.min.js"></script>
	<script src="assets/scripts/klorofil-common.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.3.15/proj4.js"></script>
	<script src="https://code.highcharts.com/highcharts.js"></script>
	<script src="https://code.highcharts.com/maps/modules/map.js"></script>
	<script src="https://code.highcharts.com/maps/modules/exporting.js"></script>
	<script src="https://code.highcharts.com/mapdata/countries/us/us-all.js"></script>
	<script src="https://code.highcharts.com/mapdata/countries/my/my-all.js"></script>
	<script>
	$(function() {
		Highcharts.seriesType('mappie', 'pie', {
    center: null, // Can't be array by default anymore
    clip: true, // For map navigation
    states: {
        hover: {
            halo: {
                size: 5
            }
        }
    },
    dataLabels: {
        enabled: false
    }
}, {
    getCenter: function () {
        var options = this.options,
            chart = this.chart,
            slicingRoom = 2 * (options.slicedOffset || 0);
        if (!options.center) {
            options.center = [null, null]; // Do the default here instead
        }
        // Handle lat/lon support
        if (options.center.lat !== undefined) {
            var point = chart.fromLatLonToPoint(options.center);
            options.center = [
                chart.xAxis[0].toPixels(point.x, true),
                chart.yAxis[0].toPixels(point.y, true)
            ];
        }
        // Handle dynamic size
        if (options.sizeFormatter) {
            options.size = options.sizeFormatter.call(this);
        }
        // Call parent function
        var result = Highcharts.seriesTypes.pie.prototype.getCenter.call(this);
        // Must correct for slicing room to get exact pixel pos
        result[0] -= slicingRoom;
        result[1] -= slicingRoom;
        return result;
    },
    translate: function (p) {
        this.options.center = this.userOptions.center;
        this.center = this.getCenter();
        return Highcharts.seriesTypes.pie.prototype.translate.call(this, p);
    }
});


var data_gender_2016 = [
				['Sabah', 796, 799, 1595, 1,{ drawConnector: false }],
				['Sarawak', 837, 684, 1521, 1,{  drawConnector: false }],
				['Labuan', 4, 8, 12, 1,{  drawConnector: false }],
				['Kedah', 1070, 921, 1991, 1,{ drawConnector: false }],
				['Pulau Pinang', 381, 343, 724, 1,{  drawConnector: false }],
				['Selangor', 3366, 3691, 7057, 1,{  drawConnector: false }],
				['Pahang', 322, 404, 726, 1,{  drawConnector: false }],
				['Kuala Lumpur', 1392, 1554, 2946, 1,{lat: -0.7, lon: 2 ,   drawConnector: false }],
				['Putrajaya', 121, 124, 245, 1,{   drawConnector: false }],
				['Perlis', 118 ,86, 204, 1,{  drawConnector: false }],
				['Johor', 791, 854, 1645, 1,{  drawConnector: false }],
				['Perak', 1185, 1376, 2561, 1,{  drawConnector: false }],
				['Kelantan', 410 , 446, 856, 1 ,{  drawConnector: false }],
				['Melaka', 444, 394, 838, 1,{ drawConnector: false }],
				['Negeri Sembilan', 470, 543, 1013, 1,{  drawConnector: false }],
				['Terengganu', 250 , 304, 554, 1,{  drawConnector: false }]
    ],
    maxVotes = 0,
    demColor = 'rgba(220,71,71,0.80)',
    repColor = 'rgba(74,131,240,0.80)';
    libColor = 'rgba(240,190,50,0.80)',
    grnColor = 'rgba(90,200,90,0.80)';

		var data_brand_2016 = [
						['Sabah', 0, 22, 0, 0, 63, 0, 117, 178, 94, 538, 101, 253, 229, 1595, 7,{ drawConnector: false }],
						['Sarawak', 0, 37, 0, 0, 47, 0, 97, 141, 65, 604, 85, 257, 193, 1526, 7,{  drawConnector: false }],
						['Labuan', 0, 0, 0, 0, 0, 0, 0, 2, 2, 6, 0, 1, 1, 12,  7,{  drawConnector: false }],
						['Kedah', 1, 47, 1, 0, 58, 0, 227, 137, 15, 906, 45, 350, 205, 1992, 7,{ drawConnector: false }],
						['Pulau Pinang', 1, 12, 3, 0, 15, 0, 108, 53, 21, 244, 26, 125, 76, 684, 7,{  drawConnector: false }],
						['Selangor', 9, 152, 11, 3, 177, 2, 1060, 579, 105, 2658, 250, 1115, 937, 7058, 7,{  drawConnector: false }],
						['Pahang', 0, 10, 1, 0, 34, 0, 61, 77, 25, 234, 40, 119, 125, 726, 7,{  drawConnector: false }],
						['Kuala Lumpur', 7, 97, 21, 1, 65, 0, 372, 258, 51, 1233, 83, 353, 409, 2950, 7,{lat: -0.7, lon: 2 ,   drawConnector: false }],
						['Putrajaya', 0, 3, 1, 0, 3, 0, 55, 14, 5, 93, 6, 28, 37, 245, 7,{   drawConnector: false }],
						['Perlis', 0, 2, 4, 0, 3, 0, 18, 17, 6, 100, 13, 28, 13, 204, 7,{  drawConnector: false }],
						['Johor', 2, 41, 2, 1, 51, 0, 156, 137, 39, 756, 628, 129, 165, 2107, 7,{  drawConnector: false }],
						['Perak', 14, 34, 2, 0, 60, 0, 565, 164, 48, 890, 105, 403, 282, 2567, 7,{  drawConnector: false }],
						['Kelantan', 0, 28, 5, 1, 31, 0, 76, 93, 39, 275, 54, 159, 95, 856, 7 ,{  drawConnector: false }],
						['Melaka', 0, 30, 0, 0, 21, 0, 120, 71, 15, 284, 32, 140, 125, 838, 7,{ drawConnector: false }],
						['Negeri Sembilan', 0, 18, 0, 0, 32, 0, 142, 84, 17, 340, 48, 149, 184, 1014, 7,{  drawConnector: false }],
						['Terengganu', 0, 7, 0, 0, 17, 0, 59, 52, 18, 200, 34, 115, 52, 554, 7,{  drawConnector: false }]
		    ];

				var data_age_2016 = [
								['Sabah', 4, 214, 576, 379, 297, 109, 16, 0, 1595, 6,{ drawConnector: false }],
								['Sarawak', 1, 265, 632, 314, 228, 79, 5, 0, 1524, 6,{  drawConnector: false }],
								['Labuan', 0, 2, 3, 2, 3, 2, 0, 0, 12,  6,{  drawConnector: false }],
								['Kedah', 8, 197, 565, 501, 420, 243, 54, 4, 1992, 6,{ drawConnector: false }],
								['Pulau Pinang', 4, 126, 294, 157, 90, 44, 5, 4, 724, 6,{  drawConnector: false }],
								['Selangor', 7, 799, 2632, 1695, 1374, 492, 54, 5, 7058, 6,{  drawConnector: false }],
								['Pahang', 0, 100, 273, 165, 133, 48, 6, 1, 726, 6,{  drawConnector: false }],
								['Kuala Lumpur', 3, 224, 646, 491, 497, 213, 22, 6, 2102, 6,{lat: -0.7, lon: 2 ,   drawConnector: false }],
								['Putrajaya', 0, 12, 130, 46, 35, 21, 1, 0, 245, 6,{   drawConnector: false }],
								['Perlis', 0, 1, 41, 70, 31, 15, 5, 1, 164, 6,{  drawConnector: false }],
								['Johor', 1, 203, 655, 420, 249, 101, 18, 0, 1647, 6,{  drawConnector: false }],
								['Perak', 4, 207, 602, 379, 370, 170, 41, 3, 1776, 6,{  drawConnector: false }],
								['Kelantan', 2, 115, 336, 193, 158, 41, 10, 1, 856, 6 ,{  drawConnector: false }],
								['Melaka', 0, 135, 303, 202, 153, 41, 3, 1, 838, 6,{ drawConnector: false }],
								['Negeri Sembilan', 5, 130, 386, 245, 179, 59, 8, 2, 1014, 6,{  drawConnector: false }],
								['Terengganu', 1, 70, 211, 124, 114, 30, 3, 1, 554, 6,{  drawConnector: false }]
				    ];

				var data_gender_2017 = [
								['Sabah', 352, 336, 688, 1,{ drawConnector: false }],
								['Sarawak', 458, 421, 879, 1,{  drawConnector: false }],
								['Labuan', 6, 6, 12, 1,{  drawConnector: false }],
								['Kedah', 438, 412, 850, 1,{ drawConnector: false }],
								['Pulau Pinang', 150, 175, 325, 1,{  drawConnector: false }],
								['Selangor', 1237, 1469, 2706, 1,{  drawConnector: false }],
								['Pahang', 123, 168, 291, 1,{  drawConnector: false }],
								['Kuala Lumpur', 512, 556, 1068, 1,{lat: -0.7, lon: 2 ,   drawConnector: false }],
								['Putrajaya', 56, 72, 128, 1,{   drawConnector: false }],
								['Perlis', 52, 53, 105, 1,{  drawConnector: false }],
								['Johor', 333, 418, 751, 1,{  drawConnector: false }],
								['Perak', 442, 531, 973, 1,{  drawConnector: false }],
								['Kelantan', 172, 203, 375, 1 ,{  drawConnector: false }],
								['Melaka', 177, 201, 378, 1,{ drawConnector: false }],
								['Negeri Sembilan', 159, 190, 349, 1,{  drawConnector: false }],
								['Terengganu', 112, 150, 262, 1,{  drawConnector: false }]
				    ];

				var data_brand_2017 = [
								['Sabah', 0, 41, 0, 3, 8, 0, 21, 31, 39, 343, 38, 76, 87, 687, 7,{ drawConnector: false }],
								['Sarawak', 0, 20, 2, 1, 4, 0, 59, 49, 35, 444, 45, 113, 107, 879, 7,{  drawConnector: false }],
								['Labuan', 0, 1, 0, 0, 0, 0, 2, 0, 0, 4, 0, 3, 1, 11,  7,{  drawConnector: false }],
								['Kedah', 0, 48, 1, 0, 9, 0, 33, 17, 6, 589, 13, 60, 75, 851, 7,{ drawConnector: false }],
								['Pulau Pinang', 0, 13, 0, 0, 1, 0, 21, 21, 3, 199, 9, 30, 28, 325, 7,{  drawConnector: false }],
								['Selangor', 1, 150, 1, 1, 39, 8, 160, 114, 26, 1569, 64, 220, 357, 2710, 7,{  drawConnector: false }],
								['Pahang', 0, 16, 0, 0, 6, 0, 12, 17, 8, 146, 9, 42, 36, 292, 7,{  drawConnector: false }],
								['Kuala Lumpur', 1, 93, 2, 0, 7, 2, 58, 61, 0, 623, 23, 61, 137, 1068, 7,{lat: -0.7, lon: 2 ,   drawConnector: false }],
								['Putrajaya', 0, 9, 0, 0, 1, 0, 7, 3, 0, 66, 3, 12, 27, 128, 7,{   drawConnector: false }],
								['Perlis', 0, 1, 0, 0, 1, 0, 4, 3, 0, 77, 3, 6, 10, 105, 7,{  drawConnector: false }],
								['Johor', 0, 32, 1, 0, 8, 0, 35, 33, 14, 437, 17, 83, 94, 754, 7,{  drawConnector: false }],
								['Perak', 0, 60, 0, 3, 19, 0, 80, 34, 24, 527, 33, 85, 109, 974, 7,{  drawConnector: false }],
								['Kelantan', 0, 13, 5, 2, 11, 0, 24, 19, 13, 187, 12, 46, 43, 375, 7 ,{  drawConnector: false }],
								['Melaka', 2, 33, 0, 0, 4, 0, 24, 13, 5, 203, 7, 34, 55, 380, 1,{ drawConnector: false }],
								['Negeri Sembilan', 0, 16, 0, 0, 1, 1, 15, 22, 9, 195, 2, 27, 61, 349, 7,{  drawConnector: false }],
								['Terengganu', 0, 13, 2, 0, 5, 0, 8, 14, 7, 147, 13, 27, 27, 263, 7,{  drawConnector: false }]
				    ];

						var data_age_2017 = [
										['Sabah', 1, 100, 254, 157, 125, 42, 9, 0, 688, 6,{ drawConnector: false }],
										['Sarawak', 0, 178, 289, 213, 160, 36, 3, 0, 879, 6,{  drawConnector: false }],
										['Labuan', 0, 0, 2, 0, 8, 2, 0, 0, 12,  6,{  drawConnector: false }],
										['Kedah', 1, 105, 229, 220, 201, 75, 19, 1, 851, 6,{ drawConnector: false }],
										['Pulau Pinang', 0, 61, 129, 62, 51, 22, 0, 0, 325, 6,{  drawConnector: false }],
										['Selangor', 0, 51, 125, 96, 65, 23, 0, 0, 360, 6,{  drawConnector: false }],
										['Pahang', 0, 44, 126, 52, 46, 22, 2, 0, 292, 6,{  drawConnector: false }],
										['Kuala Lumpur', 0, 137, 302, 259, 257, 97, 15, 0, 1067, 6,{lat: -0.7, lon: 2 ,   drawConnector: false }],
										['Putrajaya', 0, 13, 46, 32, 24, 13, 0, 0, 128, 6,{   drawConnector: false }],
										['Perlis', 0, 18, 41, 16, 16, 13, 1, 0, 105, 6,{  drawConnector: false }],
										['Johor', 0, 21, 56, 32, 10, 3, 0, 0, 122, 6,{  drawConnector: false }],
										['Perak', 0, 9, 27, 9, 9, 3, 2, 0, 59, 6,{  drawConnector: false }],
										['Kelantan', 0, 54, 124, 92, 78, 26, 1, 0, 375, 6 ,{  drawConnector: false }],
										['Melaka', 0, 55, 162, 92, 63, 7, 1, 0, 380, 6,{ drawConnector: false }],
										['Negeri Sembilan', 0, 51, 108, 79, 76, 32, 3, 0, 349, 6,{  drawConnector: false }],
										['Terengganu', 0, 29, 71, 36, 49, 10, 0, 0, 195, 6,{  drawConnector: false }]
						    ];

// Compute max votes to find relative sizes of bubbles
// Highcharts.each(data, function (row) {
//     maxVotes = Math.max(maxVotes, row[5]);
// });

// Build the chart
var chart = Highcharts.mapChart('container_gender_2017', {
    title: {
        text: '2017 馬來西亞地區購買冷氣的男女消費者比例'
    },

    chart: {
        animation: true // Disable animation, especially for zooming
    },

    colorAxis: {
        dataClasses: [{
            from: -1,
            to: 0,
            color: 'rgba(244,91,91,0.5)',
            name: 'Female'
        }, {
            from: 0,
            to: 1,
            color: 'rgba(124,181,236,0.5)',
            name: 'Male'
        }]
    },

    mapNavigation: {
        enabled: true
    },
    // Limit zoom range
    yAxis: {
        minRange: 2300
    },

    tooltip: {
        useHTML: true
    },

    // Default options for the pies
    plotOptions: {
        mappie: {
            borderColor: 'rgba(255,255,255,0.4)',
            borderWidth: 1,
            tooltip: {
                headerFormat: ''
            }
        }
    },

    series: [{
        mapData: Highcharts.maps['countries/my/my-all'],
        data: data_gender_2017,
        name: 'States',
        borderColor: '#FFF',
        showInLegend: false,
        joinBy: ['name', 'id'],
        keys: ['id', 'Female', 'Male', 'Sum', 'value', 'pieOffset'],
        tooltip: {
            headerFormat: '',
            pointFormatter: function () {
                var hoverVotes = this.hoverVotes; // Used by pie only
                return '<b>' + this.id + ' Amount</b><br/>' +
                    Highcharts.map([
                        ['Female', this.Female, demColor],
                        ['Male', this.Male, repColor],
                    ].sort(function (a, b) {
                        return b[1] - a[1]; // Sort tooltip by most votes
                    }), function (line) {
                        return '<span style="color:' + line[2] +
                            // Colorized bullet
                            '">\u25CF</span> ' +
                            // Party and votes
                            (line[0] === hoverVotes ? '<b>' : '') +
                            line[0] + ': ' +
                            Highcharts.numberFormat(line[1], 0) +
                            (line[0] === hoverVotes ? '</b>' : '') +
                            '<br/>';
                    }).join('') +
                    '<hr/>Total: ' + Highcharts.numberFormat(this.Sum, 0);
            }
        }
    }, {
        name: 'Separators',
        type: 'mapline',
        data: Highcharts.geojson(Highcharts.maps['countries/my/my-all'], 'mapline'),
        color: '#707070',
        showInLegend: false,
        enableMouseTracking: false
    }, {
        name: 'Connectors',
        type: 'mapline',
        color: 'rgba(130, 130, 130, 0.5)',
        zIndex: 5,
        showInLegend: false,
        enableMouseTracking: false
    }]
});

// When clicking legend items, also toggle connectors and pies
Highcharts.each(chart.legend.allItems, function (item) {
    var old = item.setVisible;
    item.setVisible = function () {
        var legendItem = this;
        old.call(legendItem);
        Highcharts.each(chart.series[0].points, function (point) {
            if (chart.colorAxis[0].dataClasses[point.dataClass].name === legendItem.name) {
                // Find this state's pie and set visibility
                Highcharts.find(chart.series, function (item) {
                    return item.name === point.id;
                }).setVisible(legendItem.visible, false);
                // Do the same for the connector point if it exists
                var connector = Highcharts.find(chart.series[2].points, function (item) {
                    return item.name === point.id;
                });
                if (connector) {
                    connector.setVisible(legendItem.visible, false);
                }
            }
        });
        chart.redraw();
    };
});

// Add the pies after chart load, optionally with offset and connectors
Highcharts.each(chart.series[0].points, function (state) {
    if (!state.id) {
        return; // Skip points with no data, if any
    }

    var pieOffset = state.pieOffset || {},
        centerLat = parseFloat(state.properties.latitude),
        centerLon = parseFloat(state.properties.longitude);
//console.log(this.Highcharts.charts[0].yAxis[0]);
    // Add the pie for this state
    chart.addSeries({
        type: 'mappie',
        name: state.id,
        zIndex: 6, // Keep pies above connector lines
        sizeFormatter: function () {
            var yAxis = this.chart.yAxis[0],
                zoomFactor = (yAxis.dataMax - yAxis.dataMin) /
                    (yAxis.max - yAxis.min);

            return Math.max(
                this.chart.chartWidth / 45 * zoomFactor, // Min size
                this.chart.chartWidth / 11
								 * zoomFactor * state.Female / state.Sum
            );
        },
        tooltip: {
            // Use the state tooltip for the pies as well
            pointFormatter: function () {
                return state.series.tooltipOptions.pointFormatter.call({
                    id: state.id,
                    hoverVotes: this.name,
                    Female: state.Female,
                    Male: state.Male,
                    Sum: state.Sum
                });
            }
        },
        data: [{
            name: 'Female',
            y: state.Female,
            color: demColor
        }, {
            name: 'Male',
            y: state.Male,
            color: repColor
        }],
        center: {
            lat: centerLat + (pieOffset.lat || 0),
            lon: centerLon + (pieOffset.lon || 0)
        }
    }, false);

    // Draw connector to state center if the pie has been offset
    if (pieOffset.drawConnector !== false) {
        var centerPoint = chart.fromLatLonToPoint({
                lat: centerLat,
                lon: centerLon
            }),
            offsetPoint = chart.fromLatLonToPoint({
                lat: centerLat + (pieOffset.lat || 0),
                lon: centerLon + (pieOffset.lon || 0)
            });
        chart.series[2].addPoint({
            name: state.id,
            path: 'M' + offsetPoint.x + ' ' + offsetPoint.y +
                'L' + centerPoint.x + ' ' + centerPoint.y
        }, false);
    }
});

// Build the chart
var chart_brand_2017 = Highcharts.mapChart('container_brand_2017', {
    title: {
        text: '2017 馬來西亞地區購買冷氣的品牌比例'
    },

    chart: {
        animation: true // Disable animation, especially for zooming
    },

    colorAxis: {
        dataClasses: [{
            from: -1,
            to: 0,
            color: 'rgba(239, 213, 112,0.8)',
            name: 'Acson'
        }, {
            from: 0,
            to: 1,
            color: 'rgba(30, 206, 17,0.8)',
            name: 'Beko'
				}, {
						from: 1,
						to: 2,
						color: 'rgba(124,181,236,0.8)',
						name: 'Cornell'
				}, {
						from: 2,
						to: 3,
						color: 'rgba(69, 246, 231,0.8)',
						name: 'Elba'
				}, {
						from: 3,
						to: 4,
						color: 'rgba(58, 150, 142,0.8)',
						name: 'Electrolux'
				}, {
            from: 4,
            to: 5,
            color: 'rgba(112, 156, 239,0.8)',
            name: 'Haier'
				}, {
						from: 5,
						to: 6,
						color: 'rgba(39, 94, 194,0.8)',
						name: 'Hitachi'
				}, {
						from: 6,
						to: 7,
						color: 'rgba(243, 158, 72,0.8)',
						name: 'LG'
				}, {
						from: 7,
						to: 8,
						color: 'rgba(161, 248, 154,0.8)',
						name: 'MEC'
				}, {
						from: 8,
						to: 9,
						color: 'rgba(236, 54, 54 ,0.8)',
						name: 'Panasonic'
				}, {
						from: 9,
						to: 10,
						color: 'rgba(202, 77, 233,0.8)',
						name: 'Pensonic'
				}, {
						from: 10,
						to: 11,
						color: 'rgba(240, 121, 220,0.5)',
						name: 'Samsung'
				}, {
						from: 11,
						to: 12,
						color: 'rgba(195, 129, 212)',
						name: 'Sharp'
        }]
    },

    mapNavigation: {
        enabled: true
    },
    // Limit zoom range
    yAxis: {
        minRange: 2300
    },

    tooltip: {
        useHTML: true
    },

    // Default options for the pies
    plotOptions: {
        mappie: {
            borderColor: 'rgba(255,255,255,0.4)',
            borderWidth: 1,
            tooltip: {
                headerFormat: ''
            }
        }
    },

    series: [{
        mapData: Highcharts.maps['countries/my/my-all'],
        data: data_brand_2017,
        name: 'States',
        borderColor: '#FFF',
        showInLegend: false,
        joinBy: ['name', 'id'],
        keys: ['id', 'Acson', 'Beko', 'Cornell', 'Elba', 'Electrolux', 'Haier', 'Hitachi', 'LG', 'MEC', 'Panasonic', 'Pensonic', 'Samsung', 'Sharp', 'Sum', 'value', 'pieOffset'],
        tooltip: {
            headerFormat: '',
            pointFormatter: function () {
                var hoverVotes = this.hoverVotes; // Used by pie only
                return '<b>' + this.id + ' Amount</b><br/>' +
                    Highcharts.map([
                        ['Acson', this.Acson, 'rgba(239, 213, 112,0.8)'],
                        ['Beko', this.Beko, 'rgba(30, 206, 17,0.8)'],
												['Cornell', this.Cornell, 'rgba(124,181,236,0.8)'],
                        ['Elba', this.Elba, 'rgba(69, 246, 231,0.8)'],
												['Electrolux', this.Electrolux, 'rbga(58, 150, 142,0.8)'],
                        ['Haier', this.Haier, 'rgba(112, 156, 239,0.8)'],
												['Hitachi', this.Hitachi, 'rgba(39, 94, 194,0.8)'],
                        ['LG', this.LG, 'rgba(243, 158, 72,0.8)'],
												['MEC', this.MEC, 'rgba(161, 248, 154,0.8)'],
                        ['Panasonic', this.Panasonic, 'rgba(236, 54, 54 ,0.8)'],
												['Pensonic', this.Pensonic, 'rgba(202, 77, 233,0.8)'],
                        ['Samsung', this.Samsung, 'rgba(240, 121, 220,0.5)'],
												['Sharp', this.Sharp, 'rgba(195, 129, 212)'],

                        //['Libertarians', this.libVotes, libColor],
                        //['Green', this.grnVotes, grnColor]
                    ].sort(function (a, b) {
                        return b[1] - a[1]; // Sort tooltip by most votes
                    }), function (line) {
                        return '<span style="color:' + line[2] +
                            // Colorized bullet
                            '">\u25CF</span> ' +
                            // Party and votes
                            (line[0] === hoverVotes ? '<b>' : '') +
                            line[0] + ': ' +
                            Highcharts.numberFormat(line[1], 0) +
                            (line[0] === hoverVotes ? '</b>' : '') +
                            '<br/>';
                    }).join('') +
                    '<hr/>Total: ' + Highcharts.numberFormat(this.Sum, 0);
            }
        }
    }, {
        name: 'Separators',
        type: 'mapline',
        data: Highcharts.geojson(Highcharts.maps['countries/my/my-all'], 'mapline'),
        color: '#707070',
        showInLegend: false,
        enableMouseTracking: false
    }, {
        name: 'Connectors',
        type: 'mapline',
        color: 'rgba(130, 130, 130, 0.5)',
        zIndex: 5,
        showInLegend: false,
        enableMouseTracking: false
    }]
});

// When clicking legend items, also toggle connectors and pies
Highcharts.each(chart_brand_2017.legend.allItems, function (item) {
    var old = item.setVisible;
    item.setVisible = function () {
        var legendItem = this;
        old.call(legendItem);
        Highcharts.each(chart_brand_2017.series[0].points, function (point) {
            if (chart.colorAxis[0].dataClasses[point.dataClass].name === legendItem.name) {
                // Find this state's pie and set visibility
                Highcharts.find(chart_brand_2017.series, function (item) {
                    return item.name === point.id;
                }).setVisible(legendItem.visible, false);
                // Do the same for the connector point if it exists
                var connector = Highcharts.find(chart_brand_2017.series[2].points, function (item) {
                    return item.name === point.id;
                });
                if (connector) {
                    connector.setVisible(legendItem.visible, false);
                }
            }
        });
        chart_brand_2017.redraw();
    };
});

// Add the pies after chart load, optionally with offset and connectors
Highcharts.each(chart_brand_2017.series[0].points, function (state) {
    if (!state.id) {
        return; // Skip points with no data, if any
    }

    var pieOffset = state.pieOffset || {},
        centerLat = parseFloat(state.properties.latitude),
        centerLon = parseFloat(state.properties.longitude);

//console.log(this.Highcharts.charts[0].yAxis[0]);
    // Add the pie for this state
    chart_brand_2017.addSeries({
        type: 'mappie',
        name: state.id,
        zIndex: 6, // Keep pies above connector lines
        sizeFormatter: function () {
            var yAxis = this.chart.yAxis[0],
                zoomFactor = (yAxis.dataMax - yAxis.dataMin) /
                    (yAxis.max - yAxis.min);

            return Math.max(
                this.chart.chartWidth / 45 * zoomFactor, // Min size
                this.chart.chartWidth / 11
								 * zoomFactor * state.Panasonic  / state.Sum
            );
        },
        tooltip: {
            // Use the state tooltip for the pies as well
            pointFormatter: function () {
                return state.series.tooltipOptions.pointFormatter.call({
                    id: state.id,
                    hoverVotes: this.name,
                    Acson: state.Acson,
                    Beko: state.Beko,
                    Cornell: state.Cornell,
                    Elba: state.Elba,
										Electrolux: state.Electrolux,
										Haier: state.Haier,
										Hitachi: state.Hitachi,
										LG: state.LG,
										MEC: state.MEC,
										Panasonic: state.Panasonic,
										Pensonic: state.Pensonic,
										Samsung: state.Samsung,
										Sharp: state.Sharp,
                    Sum: state.Sum
                });
            }
        },
        data: [{
            name: 'Acson',
            y: state.Acson,
            color: 'rgba(239, 213, 112,0.8)'
        }, {
            name: 'Beko',
            y: state.Beko,
            color: 'rgba(30, 206, 17,0.8)'
        }, {
            name: 'Cornell',
            y: state.Cornell,
            color: 'rgba(124,181,236,0.8)'
        }, {
            name: 'Elba',
            y: state.Elba,
            color: 'rgba(69, 246, 231,0.8)'
				}, {
            name: 'Electrolux',
            y: state.Electrolux,
            color: 'rgba(58, 150, 142,0.8)'
        }, {
            name: 'Haier',
            y: state.Haier,
            color: 'rgba(112, 156, 239,0.8)'
				}, {
            name: 'Hitachi',
            y: state.Hitachi,
            color: 'rgba(39, 94, 194,0.8)'
        }, {
            name: 'LG',
            y: state.LG,
            color: 'rgba(243, 158, 72,0.8)'
        }, {
            name: 'MEC',
            y: state.MEC,
            color: 'rgba(161, 248, 154,0.8)'
				}, {
            name: 'Panasonic',
            y: state.Panasonic,
            color: 'rgba(236, 54, 54 ,0.8)'
        }, {
            name: 'Pensonic',
            y: state.Pensonic,
            color: 'rgba(202, 77, 233,0.8)'
				}, {
            name: 'Samsung',
            y: state.Samsung,
            color: 'rgba(240, 121, 220,0.5)'
        }, {
            name: 'Sharp',
            y: state.Sharp,
            color: 'rgba(195, 129, 212)'
        }],
        center: {
            lat: centerLat + (pieOffset.lat || 0),
            lon: centerLon + (pieOffset.lon || 0)
        }
    }, false);

    // Draw connector to state center if the pie has been offset
    if (pieOffset.drawConnector !== false) {
        var centerPoint = chart_brand_2017.fromLatLonToPoint({
                lat: centerLat,
                lon: centerLon
            }),
            offsetPoint = chart_brand_2017.fromLatLonToPoint({
                lat: centerLat + (pieOffset.lat || 0),
                lon: centerLon + (pieOffset.lon || 0)
            });
        chart_brand_2017.series[2].addPoint({
            name: state.id,
            path: 'M' + offsetPoint.x + ' ' + offsetPoint.y +
                'L' + centerPoint.x + ' ' + centerPoint.y
        }, false);
    }
});

// Build the chart
var chart_age_2017 = Highcharts.mapChart('container_age_2017', {
    title: {
        text: '2017 馬來西亞地區購買冷氣的消費者年齡比例'
    },

    chart: {
        animation: true // Disable animation, especially for zooming
    },

    colorAxis: {
        dataClasses: [{
            from: -1,
            to: 0,
            color: 'rgba(239, 213, 112,0.8)',
            name: 'teens'
        }, {
            from: 0,
            to: 1,
            color: 'rgba(30, 206, 17,0.8)',
            name: 'twenties'
				}, {
						from: 1,
						to: 2,
						color: 'rgba(124,181,236,0.8)',
						name: 'thirties'
				}, {
						from: 2,
						to: 3,
						color: 'rgba(69, 246, 231,0.8)',
						name: 'fourties'
				}, {
						from: 3,
						to: 4,
						color: 'rgba(58, 150, 142,0.8)',
						name: 'fifties'
				}, {
            from: 4,
            to: 5,
            color: 'rgba(112, 156, 239,0.8)',
            name: 'sixties'
				}, {
						from: 5,
						to: 6,
						color: 'rgba(39, 94, 194,0.8)',
						name: 'seventies'
				}, {
						from: 6,
						to: 7,
						color: 'rgba(243, 158, 72,0.8)',
						name: 'eighties'
        }]
    },

    mapNavigation: {
        enabled: true
    },
    // Limit zoom range
    yAxis: {
        minRange: 2300
    },

    tooltip: {
        useHTML: true
    },

    // Default options for the pies
    plotOptions: {
        mappie: {
            borderColor: 'rgba(255,255,255,0.4)',
            borderWidth: 1,
            tooltip: {
                headerFormat: ''
            }
        }
    },

    series: [{
        mapData: Highcharts.maps['countries/my/my-all'],
        data: data_age_2017,
        name: 'States',
        borderColor: '#FFF',
        showInLegend: false,
        joinBy: ['name', 'id'],
        keys: ['id', 'teens', 'twenties', 'thirties', 'fourties', 'fifties', 'sixties', 'seventies', 'eighties', 'Sum', 'value', 'pieOffset'],
        tooltip: {
            headerFormat: '',
            pointFormatter: function () {
                var hoverVotes = this.hoverVotes; // Used by pie only
                return '<b>' + this.id + ' Amount</b><br/>' +
                    Highcharts.map([
                        ['teens', this.teens, 'rgba(239, 213, 112,0.8)'],
                        ['twenties', this.twenties, 'rgba(30, 206, 17,0.8)'],
												['thirties', this.thirties, 'rgba(124,181,236,0.8)'],
                        ['fourties', this.fourties, 'rgba(69, 246, 231,0.8)'],
												['fifties', this.fifties, 'rbga(58, 150, 142,0.8)'],
                        ['sixties', this.sixties, 'rgba(112, 156, 239,0.8)'],
												['seventies', this.seventies, 'rgba(39, 94, 194,0.8)'],
                        ['eighties', this.eighties, 'rgba(243, 158, 72,0.8)'],
                    ].sort(function (a, b) {
                        return b[1] - a[1]; // Sort tooltip by most votes
                    }), function (line) {
                        return '<span style="color:' + line[2] +
                            // Colorized bullet
                            '">\u25CF</span> ' +
                            // Party and votes
                            (line[0] === hoverVotes ? '<b>' : '') +
                            line[0] + ': ' +
                            Highcharts.numberFormat(line[1], 0) +
                            (line[0] === hoverVotes ? '</b>' : '') +
                            '<br/>';
                    }).join('') +
                    '<hr/>Total: ' + Highcharts.numberFormat(this.Sum, 0);
            }
        }
    }, {
        name: 'Separators',
        type: 'mapline',
        data: Highcharts.geojson(Highcharts.maps['countries/my/my-all'], 'mapline'),
        color: '#707070',
        showInLegend: false,
        enableMouseTracking: false
    }, {
        name: 'Connectors',
        type: 'mapline',
        color: 'rgba(130, 130, 130, 0.5)',
        zIndex: 5,
        showInLegend: false,
        enableMouseTracking: false
    }]
});

// When clicking legend items, also toggle connectors and pies
Highcharts.each(chart_age_2017.legend.allItems, function (item) {
    var old = item.setVisible;
    item.setVisible = function () {
        var legendItem = this;
        old.call(legendItem);
        Highcharts.each(chart_age_2017.series[0].points, function (point) {
            if (chart.colorAxis[0].dataClasses[point.dataClass].name === legendItem.name) {
                // Find this state's pie and set visibility
                Highcharts.find(chart_age_2017.series, function (item) {
                    return item.name === point.id;
                }).setVisible(legendItem.visible, false);
                // Do the same for the connector point if it exists
                var connector = Highcharts.find(chart_age_2017.series[2].points, function (item) {
                    return item.name === point.id;
                });
                if (connector) {
                    connector.setVisible(legendItem.visible, false);
                }
            }
        });
      chart_age_2017.redraw();
    };
});

// Add the pies after chart load, optionally with offset and connectors
Highcharts.each(chart_age_2017.series[0].points, function (state) {
    if (!state.id) {
        return; // Skip points with no data, if any
    }

    var pieOffset = state.pieOffset || {},
        centerLat = parseFloat(state.properties.latitude),
        centerLon = parseFloat(state.properties.longitude);

//console.log(this.Highcharts.charts[0].yAxis[0]);
    // Add the pie for this state
    chart_age_2017.addSeries({
        type: 'mappie',
        name: state.id,
        zIndex: 6, // Keep pies above connector lines
        sizeFormatter: function () {
            var yAxis = this.chart.yAxis[0],
                zoomFactor = (yAxis.dataMax - yAxis.dataMin) /
                    (yAxis.max - yAxis.min);

            return Math.max(
                this.chart.chartWidth / 45 * zoomFactor, // Min size
                this.chart.chartWidth / 11
								 * zoomFactor * state.thirties * 1.5 / state.Sum
            );
        },
        tooltip: {
            // Use the state tooltip for the pies as well
            pointFormatter: function () {
                return state.series.tooltipOptions.pointFormatter.call({
                    id: state.id,
                    hoverVotes: this.name,
                    teens: state.teens,
                    twenties: state.twenties,
                    thirties: state.thirties,
                    fourties: state.fourties,
										fifties: state.fifties,
										sixties: state.sixties,
										seventies: state.seventies,
										eighties: state.eighties,
                    Sum: state.Sum
                });
            }
        },
        data: [{
            name: 'teens',
            y: state.teens,
            color: 'rgba(239, 213, 112,0.8)'
        }, {
            name: 'twenties',
            y: state.twenties,
            color: 'rgba(30, 206, 17,0.8)'
        }, {
            name: 'thirties',
            y: state.thirties,
            color: 'rgba(124,181,236,0.8)'
        }, {
            name: 'fourties',
            y: state.fourties,
            color: 'rgba(69, 246, 231,0.8)'
				}, {
            name: 'fifties',
            y: state.fifties,
            color: 'rgba(58, 150, 142,0.8)'
        }, {
            name: 'sixties',
            y: state.sixties,
            color: 'rgba(112, 156, 239,0.8)'
				}, {
            name: 'seventies',
            y: state.seventies,
            color: 'rgba(39, 94, 194,0.8)'
        }, {
            name: 'eighties',
            y: state.eighties,
            color: 'rgba(243, 158, 72,0.8)'

        }],
        center: {
            lat: centerLat + (pieOffset.lat || 0),
            lon: centerLon + (pieOffset.lon || 0)
        }
    }, false);

    // Draw connector to state center if the pie has been offset
    if (pieOffset.drawConnector !== false) {
        var centerPoint = chart_age_2017.fromLatLonToPoint({
                lat: centerLat,
                lon: centerLon
            }),
            offsetPoint = chart_age_2016.fromLatLonToPoint({
                lat: centerLat + (pieOffset.lat || 0),
                lon: centerLon + (pieOffset.lon || 0)
            });
        chart_age_2017.series[2].addPoint({
            name: state.id,
            path: 'M' + offsetPoint.x + ' ' + offsetPoint.y +
                'L' + centerPoint.x + ' ' + centerPoint.y
        }, false);
    }
});


// Only redraw once all pies and connectors have been added
chart.redraw();
chart_brand_2017.redraw();
chart_age_2017.redraw();
})
	</script>
</body>

</html>
